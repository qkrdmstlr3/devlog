---
id: 23
title: 웹뷰에서 스크린리더 대응하기
date: '2023-05-21'
category: develop
summary: 웹뷰에서 스크린리더가 동작하는 두 가지 상황에 대해서 다뤄봅니다. (feat.토스 장애인의 날)
---

> 웹뷰에서 스크린리더가 동작하는 두 가지 상황에 대해서 다뤄봅니다. (feat.토스 장애인의 날)

4월 20일은 장애인의 날을 맞아 토스에서 "나의 첫번째 점자카드 만들기" 시즈널 이벤트를 열었다. 디자이너분의 제안으로 해당 프로젝트를 구현하게 되었다. [이 주소](https://service.toss.im/disabled-day-2023)에서 사람들의 후기를 볼 수 있고, 이벤트를 직접 체험해볼 수 있다.

![fsm](/develop/images/screenreader-banner.png)

장애인/비장애인 모두를 고려해야하는 프로젝트이니만큼 많은 것들을 고려한 기획을 필요로 했는데, 이에 관한 자세한 내용은 토스의 디자인 컨퍼런스 [SIMPLICITY-23](https://toss.im/simplicity-23#sessions)에서 `시즌 이벤트, 사용자의 마음을 움직이다`라는 세션에서 찾아볼 수 있다.

장애인의 날이니만큼 큰글씨모드/다크모드/스크린리더 등 접근성에 대한 완벽한 대응이 목표였다. 나는 이것들 중 스크린리더에 대한 대응을 주요 목표로 삼고 프로젝트를 구현하였다. 이 글에서는 웹뷰에서 스크린리더가 기본적으로 어떻게 동작하는지 살펴보고, 안드로이드/iOS에서 스크린리더 동작의 차이에 대해서 써보고자한다.

## 스크린리더란?

먼저 스크린리더에 대해서 간단히 알아보자. 스크린리더는 컴퓨터나 모바일 화면의 텍스트를 TTS를 통해 읽어주는 소프트웨어이다. 안드로이드에서는 "톡백", iOS에서는 "보이스오버"라는 이름으로 제공된다.

기본적으로 웹뷰에서 스크린리더는 왼쪽에서 오른쪽, 위쪽에서 아래쪽방향으로 읽는다. 화면을 좌에서 우로 스와이프하면 다음 요소를, 우에서 좌로 스와이프하면 이전 요소를 읽으며, 두 번 탭하면 현재 위치한 요소를 클릭한다.

![fsm](/develop/images/screenreader-first.png)

즉, 이런 화면이 있다면 스크린리더는 '제목1' '설명1' '버튼1' 순서로 스와이프하며 읽는다.

## 스크린리더 동작 방식

### 페이지 전환

장애인의 날 이벤트는 아래 사진처럼 기본적으로 페이지마다 하나의 CTA를 가지고 있으며, CTA를 눌러서 다음 페이지로 이동한다.

![fsm](/develop/images/screenreader-second.png)

왼쪽 페이지에서 버튼을 누르면 오른쪽 페이지로 이동하게 되는데, 이 때 보이스오버는 '버튼2'를 가리키게 된다.

</br>

그렇다면 만약 다음 페이지에 CTA가 없다면 어떻게 될까?

![fsm](/develop/images/screenreader-third.png)

사진에도 보이겠지만, "백버튼"을 가리키게 된다. 페이지 전환 시 동일한 위치에 동일한 컴포넌트가 있다면 그 컴포넌트를 우선적으로 잡게되고, 그렇지 않을 경우 가장 상단 요소를 가리키는 것으로 보인다. (이 부분에 대해서는 아직 충분한 테스트를 해보지 않았다.)

 </br>

다시 본론으로 돌아오면, 첫 번째 상황에서 우리가 의도하는 것은 페이지를 이동했을 때 '버튼2'를 가리키는 것이 아니라 '페이지2 제목'을 가리키게 하는 것이다.

아래 코드처럼 focus속성을 사용해서 우리가 의도하는대로 동작하게 만들어보자. div태그는 기본적으로 focus할 수 있는 태그가 아님으로 tabIndex 속성을 추가로 주어야한다.

```jsx
function Component() {
  const ref = useRef();

  useEffect(() => {
    if (ref.current) {
      ref.current.focucs();
    }
  }, []);

  return (
    <h1 ref={ref} tabIndex={0}>
      제목2
    </h1>
  );
}
```

하지만 이렇게 페이지 전환 시 강제적으로 focus를 잡으려하면 iOS에서 이상하게 읽는 문제가 발생한다. "버.. 페이지2 제목" 처럼 버튼에 잠깐 포커스가 된 뒤에 제목으로 가는 것이다.

이 문제를 간단하게 해결할 수 있는 방법은 페이지 이동 직후 **버튼에 잠시동안 inert속성을 부여하는 것**이다([inert에 대해서 정리한 글](https://www.shellboylog.com/develop/22)). 그렇게되면 스크린리더는 버튼을 인지하지 못하고 바로 제목을 포커스하게 된다.

![fsm](/develop/images/screenreader-fourth.png)

### iOS vs Android

이번에는 iOS와 Android에서 스크린리더가 각각 어떻게 동작하는지에 대해서 살펴보자. 첫 번째 예시를 보자.

```html
<div id="wrapper" tabindex="0">
  <div>장애인의 날</div>
  <div>스크린리더 개발기</div>
</div>
```

이런 html태그가 있을 때

```javascript
document.getElementById('wrapper').focus();
```

wrapper div를 focus하면 iOS와 Android에서는 어떻게 읽어줄까?

Android에서는 "장애인의 날 스크린리더 개발기"이라고 읽어주고, iOS에서는 "장애인의 날"을 읽어준 뒤 스와이프를 한 번 하면 "스크린리더 개발기"를 읽어준다. 신기하지 않은가? (~~사실 개발할때는 진짜 화난다~~)

두 번째 예시도 한 번 살펴보자.

```jsx
<div role="button">
  <div>
    1차 내부
    <div onClick={() => log('2차')}>2차 내부</div>
  </div>
</div>
```

가장 상위의 div에 role=button을 주었다. 이 태그를 스크린리더로 클릭하면 onClick이벤트가 발생할까?

iOS의 경우에는 '2차'가 출력된다. 하지만 Android경우에는 클릭 이벤트가 발생하지 않는다.

번외로 아래의 상황들에서 iOS는 어떻게 반응하는지에 대해서도 테스트해 보았다.

**테스트1**

```jsx
<div role="button">
  <div onClick={() => log('1차')}>
    1차 내부
    <div onClick={() => log('2차')}>2차 내부</div>
  </div>
</div>
```

Android에서는 클릭이벤트가 발생하지 않았고, iOS에서는 '1차' '2차' 순서로 출력된다.

**테스트2**

```jsx
<div role="button">
  <div onClick={() => log('1차(a)')}>
    1차 내부(a)
    <div onClick={() => log('2차')}>2차 내부</div>
  </div>
  <div onClick={() => log('1차(b)')}>1차 내부(b)</div>
</div>
```

Android에서는 마찬가지로 클릭이벤트가 발생하지 않았고, iOS에서는 '1차(a)'만 출력된다.

### 결론

focus와 click이벤트, 두 가지 상황을 통해서 간단한 결론을 하나 내릴 수 있다.

> Android는 선택한 요소의 가장 바깥 tag를 기준으로 잡으며, iOS는 선택한 요소의 내부까지 판단한다.

## 마치며

이 글에서는 두 가지를 살펴보았다.

- 스크린리더로 비슷한 페이지를 전환하는 법
- iOS와 Android에서 스크린리더의 동작 차이

기본적으로 접근성하면 생각나는 aria-label aria-checked같은 aria태그들 이외에도 스크린리더를 완벽하게 대응하기 위해서는 많은 고려사항들이 필요하다. 관련된 문서를 많이 찾지 못해서 구현할 때 어려움이 많았는데, 이 글이 조금이라도 도움이 되었으면 좋겠다.

---
title: 아토믹 디자인과 테스팅(작성중)
date: "2021-08-21"
category: develop
---

## 들어가며

아토믹 디자인 패턴은 한번쯤 사용해보고 싶었던 패턴이었다. 이전에 어줍잖게 사용하려 시도했었지만 무언가 문제가 생겨 포기했었는데 최근에 친구랑 둘이서 `Start Off`라는 프로젝트를 진행했는데 심기일전하여 사용해보기로 했었다. 이번 글에서는 아토믹 디자인 패턴을 사용하며 느낀점과 첫 테스트 커버리지 90%돌파에 대해 이야기해보려한다.

![startoff](/develop/images/atomic-startoff.png)

## 아토믹 디자인 패턴

### 이란?

아토믹 디자인 패턴이 어떤 것인지는 구글링을 하면 어어어엄청나게 많은 자료가 나오니 간단히만 집고 넘어가겠다.

![atomic](/develop/images/atomic-atomic.png)

아토믹 디자인하면 이 그림이 가장 많이 나오지만 가장 확실하게 아토믹 디자인을 설명할 수 있는 그림이라고 생각한다.

...

### 고민했던 점

개념만 봤을 때는 간단했을 것이라고 생각했다. 디자인에 따라서 적절히 컴포넌트를 나누고 합하면서 정해진 단위로 만들어가면 될 것이라고 생각했다. 그래서 주먹구구식으로 시작했는데 다음과 같은 문제가 있었다.

첫 번째는 `스타일의 제한`이었다. 이것은 처음 디자인 설계부터가 문제를 일으켰다고 볼 수 있다. 간단하게 디자인틀만 잡고 구현을 시작하였는데, 구현하다보니 Atom이 다양한 방면으로 만들어져야할 필요가 있었다. 버튼을 예로 들면 Icon이 필요할 경우, form의 버튼일 경우, 상황에 따른 여러가지 크기를 고려하는 등 많은 조건을 필요로 하였다. 두 번째 문제로는 `props 관리`였다. 상태관리를 하는 props를 전달할 때, atom.molecule같은 경우 재사용성이 높은 컴포넌트들로 구성되어 있어서 redux나 contextAPI같은 전역상태를 적용하기에는 설계상 무리가 있었다. 그렇다고 최상위인 pages에서 atom으로 이벤트를 내려주기에는 과도한 props drilling이 일어날 문제가 있었다.

### 고민의 결과

첫 번째 문제를 해결하기 위해서는 디자인의 재정립이 필요했다. 기존에 구성된 더미 디자인을 바탕으로 좀 더 구체적이게 디자인을 잡았다. ( 이 과정에서 디자이너가 정말 중요하다는 것을 또 한번 느꼈다...)

잡은 디자인을 바탕으로 Atom, Molecule 등 재사용이 가능하도록 단위를 나누었고, 특히 Atom에서는 size나 theme이라는 enum을 props로 지정해주어 좀 더 다양한 스타일을 설정할 수 있도록 해주었다. 덕분에 다양한 스타일을 만들면서 디자인적으로 통일성을 유지할 수 있었다. Storybook을 이용해서 Bottom-Up방식으로 만들어진 컴포넌트들의 UI테스트를 하며 프로젝트를 진행하였다.

![storybook](/develop/images/atomic-storybook.png)

두 번째 문제로 인해서 이런저런 고민들을 해보다 atomic에 대한 여러가지 문서들을 찾아보게 되었다. 애초에 얕은 지식만으로 하나의 디자인 패턴을 도입하려 했던 것이 패착이었다.

...

## 테스트

맨날 말로만 들어오던 테스트코드를 이번 기회에 제대로 사용해보고자하는 것이 나름대로의 목표였다. atomic으로 나뉘어진 덕분에 테스트의 단위가 명확하게 나누어진다고 느꼈고 덕분에 테스트가 수월한 느낌이 있었다.

...

![test-tsx](/develop/images/atomic-test-tsx.png)

![test](/develop/images/atomic-test.png)
